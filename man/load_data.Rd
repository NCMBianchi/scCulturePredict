% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_loading.R
\name{load_data}
\alias{load_data}
\title{Load single-cell data}
\usage{
load_data(
  data_dir,
  experiment_id,
  use_shell_script = TRUE,
  metadata_file = NULL,
  counts_file = NULL,
  min_cells = 3,
  min_features = 200,
  verbose = TRUE
)
}
\arguments{
\item{data_dir}{Character string specifying the directory containing the data files.
The directory should contain files with the following naming pattern:
\itemize{
  \item \code{<experiment_id>_metadata.csv} - Cell metadata file
  \item \code{<experiment_id>_counts.csv} - Gene expression count matrix
}}

\item{experiment_id}{Character string specifying the experiment ID prefix in filenames.
This should match the prefix used in your data files.}

\item{use_shell_script}{Logical indicating whether to use shell script for file preparation.
If TRUE, attempts to use shell script first, falling back to R-based preparation if it fails.
Default is TRUE.}

\item{metadata_file}{Character string specifying the name of the metadata file.
If NULL, will be automatically detected based on experiment_id.}

\item{counts_file}{Character string specifying the name of the counts file.
If NULL, will be automatically detected based on experiment_id.}

\item{min_cells}{Integer specifying the minimum number of cells expressing a gene
for the gene to be included. Default is 3.}

\item{min_features}{Integer specifying the minimum number of genes expressed in a cell
for the cell to be included. Default is 200.}

\item{verbose}{Logical indicating whether to print progress messages. Default is TRUE.}
}
\value{
A Seurat object containing:
\itemize{
  \item Count matrix in the \code{counts} slot
  \item Cell metadata in the \code{meta.data} slot
  \item Filtered genes and cells based on \code{min_cells} and \code{min_features}
}
}
\description{
Loads single-cell data from a directory containing count matrix, metadata, and barcodes.
First attempts to use the shell script for file preparation, falling back to R-based
preparation if the script fails. Automatically validates malformed input files.
}
\details{
The function performs the following steps:
\enumerate{
  \item Validates input parameters and file existence
  \item Automatically detects metadata and counts files if not specified
  \item Loads and validates metadata and counts data
  \item Checks for data consistency (matching cell numbers)
  \item Creates a Seurat object with appropriate filtering
}
}
\examples{
\donttest{
# Basic usage with automatic file detection
seurat_obj <- load_data(
  data_dir = "path/to/data",
  experiment_id = "GSE165686"
)

# Specify custom file names
seurat_obj <- load_data(
  data_dir = "path/to/data",
  experiment_id = "GSE165686",
  metadata_file = "custom_metadata.csv",
  counts_file = "custom_counts.csv"
)

# Custom filtering parameters
seurat_obj <- load_data(
  data_dir = "path/to/data",
  experiment_id = "GSE165686",
  min_cells = 5,
  min_features = 300
)
}

}
\seealso{
\code{\link{preprocess_data}} for preprocessing the loaded data
\code{\link{reduce_dimensions}} for dimensionality reduction
}
